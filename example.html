<!DOCTYPE html>
<html>
<head>
    <title>Implicit Login</title>
    <script
      src="https://code.jquery.com/jquery-1.11.3.min.js"
      integrity="sha256-7LkWEzqTdpEfELxcZZlS6wAx5Ff13zZ83lYO2/ujj7g="
      crossorigin="anonymous"></script>
</head>
<body>
    <h1>Press the login button the try logging in!</h1>
    <button>Click to login!</button>

    <script type="text/javascript">
        if(window.location.hash) {
            console.log("Location has is: " + location.hash + "\n\n");
            var token = getParameterByName('access_token');
            console.log("Auth token is: " + token + "\n\n");

            $.ajax({
                url: "https://api.mypurecloud.com/api/v2/users/me",
                type: "GET",
                beforeSend: function(xhr){xhr.setRequestHeader('Authorization', 'bearer ' + token);},
                success: function(data) {
                    console.log(data);
                }
            });
            
            location.hash=''
        } else {
            var queryStringData = {
                response_type : "token",
                client_id : "12df5196-bdda-4fe0-8f75-dd1d6bdd8b67",
                redirect_uri : "http://localhost:3000/index.html"
            }
            window.location.replace("https://login.mypurecloud.com/oauth/authorize?" + jQuery.param(queryStringData));
        }
    </script>
</body>
</html>




<!--     <script type ="text/javascript">
        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\#&]" + name + "=([^&#]*)"),
            results = regex.exec(location.hash);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        if(window.location.hash) {
            console.log(location.hash);
            var token = getParameterByName('access_token');

            $.ajax({
                url: "https://api.mypurecloud.com/api/v2/users/me",
                type: "GET",
                beforeSend: function(xhr){xhr.setRequestHeader('Authorization', 'bearer ' + token);},
                success: function(data) {
                    console.log(data);
                }
            });

            location.hash=''

        } else {
            var queryStringData = {
                response_type : "token",
                client_id : "bfadf7a0-3364-4f65-9fda-00d37877113f",
                redirect_uri : "http://localhost:8085/oauth2/callback"
            }

            window.location.replace("https://login.mypurecloud.com/oauth/authorize?" + jQuery.param(queryStringData));
        }
    </script> -->
